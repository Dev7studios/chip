!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("lodash"),require("vue")):"function"==typeof define&&define.amd?define(["lodash","vue"],t):"object"==typeof exports?exports.StripeVueComponents=t(require("lodash"),require("vue")):e.StripeVueComponents=t(e.lodash,e.vue)}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t){e.exports=function(e,t,n,i,r){var s,a=e=e||{},o=typeof e.default;"object"!==o&&"function"!==o||(s=e,a=e.default);var l="function"==typeof a?a.options:a;t&&(l.render=t.render,l.staticRenderFns=t.staticRenderFns),i&&(l._scopeId=i);var u;if(r?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},l._ssrRegister=u):n&&(u=n),u){var d=l.functional,c=d?l.render:l.beforeCreate;d?l.render=function(e,t){return u.call(t),c(e,t)}:l.beforeCreate=c?[].concat(c,u):[u]}return{esModule:s,exports:a,options:l}}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var s=this[r][0];"number"==typeof s&&(i[s]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t],i=d[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(s(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{for(var a=[],r=0;r<n.parts.length;r++)a.push(s(n.parts[r]));d[n.id]={id:n.id,refs:1,parts:a}}}}function r(){var e=document.createElement("style");return e.type="text/css",c.appendChild(e),e}function s(e){var t,n,i=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(i){if(f)return v;i.parentNode.removeChild(i)}if(m){var s=_++;i=p||(p=r()),t=a.bind(null,i,s,!1),n=a.bind(null,i,s,!0)}else i=r(),t=o.bind(null,i),n=function(){i.parentNode.removeChild(i)};return t(e),function(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap)return;t(e=i)}else n()}}function a(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=g(t,r);else{var s=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function o(e,t){var n=t.css,i=t.media,r=t.sourceMap;if(i&&e.setAttribute("media",i),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u=n(22),d={},c=l&&(document.head||document.getElementsByTagName("head")[0]),p=null,_=0,f=!1,v=function(){},m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,n){f=n;var r=u(e,t);return i(r),function(t){for(var n=[],s=0;s<r.length;s++){var a=r[s],o=d[a.id];o.refs--,n.push(o)}t?(r=u(e,t),i(r)):r=[];for(var s=0;s<n.length;s++){var o=n[s];if(0===o.refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete d[o.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var i=n(0)(n(10),n(18),null,null,null);e.exports=i.exports},function(e,t,n){function i(e){n(21)}var r=n(0)(n(7),n(17),i,null,null);e.exports=r.exports},function(e,t,n){function i(e){n(19)}var r=n(0)(n(8),n(15),i,null,null);e.exports=r.exports},function(e,t,n){function i(e){n(20)}var r=n(0)(n(9),n(16),i,null,null);e.exports=r.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{invoices:{type:Array,required:!0}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),r=n.n(i);t.default={props:{routes:{type:Object,default:{form_post_update:""}},stripeForm:{type:Object,required:!0},paymentInfo:{type:Object,default:function(){return{card_brand:"",card_last_four:"",billing_address:"",billing_city:"",billing_state:"",billing_zip:"",billing_country:""}}}},computed:{billingAddress:function(){var e="";return e+=this.paymentInfo.billing_address?this.paymentInfo.billing_address+", ":"",e+=this.paymentInfo.billing_city?this.paymentInfo.billing_city+", ":"",e+=this.paymentInfo.billing_state?this.paymentInfo.billing_state+", ":"",e+=this.paymentInfo.billing_zip?this.paymentInfo.billing_zip+", ":"",e+=this.paymentInfo.billing_country?this.paymentInfo.billing_country+", ":"",e=e.replace(/\, $/,"")}},components:{"stripe-upgrade":r.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(23),r=n.n(i),s=n(3),a=n.n(s);t.default={props:{routes:{type:Object,default:{cancel_subscription:"",resume_subscription:"",change_plan:"",form_post_subscribe:""}},stripeForm:{type:Object,required:!0},plans:{type:Array,required:!0},subscription:{type:Object,default:function(){return{stripe_plan:"",cancelled:!1,on_grace_period:!1,ends_at:null}}},coupon:{type:String,default:""}},data:function(){return{activePlan:null}},computed:{hasSubscription:function(){return!r.a.isEmpty(this.subscription)},showResumeAlert:function(){return!!this.hasSubscription&&(this.subscription.cancelled&&this.subscription.on_grace_period)},showPricingTable:function(){return!this.hasSubscription||!this.subscription.cancelled}},methods:{isCurrentPlan:function(e){return!this.hasSubscription&&!e||this.hasSubscription&&this.subscription.stripe_plan==e},showCancelButton:function(e){return!!this.hasSubscription&&(!this.subscription.cancelled&&!e)},confirmCancel:function(e){confirm("Are you sure you want to cancel your subscription?")||e.preventDefault()},showChangeButton:function(e){return this.hasSubscription&&e},changeButtonText:function(e){return this.isCurrentPlan(e)?"Current Plan":"Change Plan"},confirmChange:function(e){if(e.target.getAttribute("disabled"))return void e.preventDefault();confirm("Are you sure you want to change your subscription? You will be charged a prorated amount now, then the new rate going forward.")||e.preventDefault()},showUpgradeButton:function(e){return!this.hasSubscription}},watch:{subscription:function(){this.hasSubscription&&(this.activePlan=r.a.find(this.plans,{id:this.subscription.stripe_plan}))}},components:{"stripe-upgrade":a.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),r=n.n(i);t.default={props:["formData","action","text","plan","coupon"],data:function(){return{stripe:null,stripeToken:"",billing_name:"",billing_address_country:"",billing_address_zip:"",billing_address_state:"",billing_address_line1:"",billing_address_city:"",billing_address_country_code:""}},created:function(){var e=this;this.stripe=StripeCheckout.configure({key:this.formData.stripe_key,name:this.formData.app_name,email:this.formData.user_email,locale:"auto",zipCode:!0,billingAddress:!0,allowRememberMe:!1,token:function(t,n){e.stripeToken=t.id,e.billing_name=n.billing_name,e.billing_address_country=n.billing_address_country,e.billing_address_zip=n.billing_address_zip,e.billing_address_state=n.billing_address_state,e.billing_address_line1=n.billing_address_line1,e.billing_address_city=n.billing_address_city,e.billing_address_country_code=n.billing_address_country_code,r.a.nextTick(function(){e.$el.submit()})}})},methods:{open:function(){this.plan?this.stripe.open({description:this.plan.name+" plan",amount:100*this.plan.price,panelLabel:"Pay {{amount}} "+this.plan.interval}):this.stripe.open({panelLabel:"Update Card Details"})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=n.n(i),s=n(5),a=n.n(s),o=n(4),l=n.n(o);n.d(t,"PlanAndPricing",function(){return r.a}),n.d(t,"PaymentInfo",function(){return a.a}),n.d(t,"PaymentHistory",function(){return l.a})},function(e,t,n){t=e.exports=n(1)(),t.push([e.i,".payment-info-spacer{padding:7px 5px}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.i,".pricing-table{margin-bottom:0}.pricing-table tbody tr td{border:0}.pricing-table .features{list-style:none;margin:0;padding:0}.pricing-table .table-spacer{padding:7px 5px}.coupon-alert,.resume-alert{margin-bottom:0}.coupon-alert{margin-top:20px}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.i,".payment-history-table .table-spacer{padding:4px 5px}",""])},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel panel-default payment-info-panel"},[n("div",{staticClass:"panel-heading"},[e._v("Payment Information")]),e._v(" "),n("div",{staticClass:"panel-body"},[e.paymentInfo.card_brand?n("div",[n("div",{staticClass:"pull-right"},[n("stripe-upgrade",{attrs:{"form-data":e.stripeForm,action:e.routes.form_post_update,text:"Update Details"}})],1),e._v(" "),n("div",{staticClass:"payment-info-spacer"},[n("p",[n("strong",[e._v("Card:")]),e._v(" "+e._s(e.paymentInfo.card_brand)+" ending in "),n("strong",[e._v(e._s(e.paymentInfo.card_last_four))])]),e._v(" "),e.billingAddress?n("p",{staticStyle:{"margin-bottom":"0"}},[n("strong",[e._v("Address:")]),e._v(" "+e._s(e.billingAddress))]):e._e()])]):n("em",[e._v("No payment information added yet")])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel panel-default plan-and-pricing-panel"},[n("div",{staticClass:"panel-heading"},[e._v("Plan and Pricing")]),e._v(" "),n("div",{staticClass:"panel-body"},[e.showResumeAlert?n("div",{staticClass:"alert alert-warning resume-alert"},[n("p",[e._v("You have cancelled your subscription to the\n\t\t\t\t"),e.activePlan?n("strong",[e._v(e._s(e.activePlan.name)+" ($"+e._s(e.activePlan.price)+" "+e._s(e.activePlan.interval)+")")]):e._e(),e._v(" plan.\n\t\t\t")]),e._v(" "),n("p",[e._v("The benefits of your subscription will continue until your current billing period ends on\n\t\t\t\t"),e.hasSubscription?n("strong",[e._v(e._s(e.subscription.ends_at))]):e._e(),e._v(". You may resume your subscription at no\n\t\t\t\textra cost until the end of the billing period.")]),e._v(" "),n("p",{staticStyle:{"margin-top":"20px"}},[n("a",{staticClass:"btn btn-primary",attrs:{href:e.routes.resume_subscription}},[e._v("Resume Subscription")])])]):e._e(),e._v(" "),e.showPricingTable?n("table",{staticClass:"table pricing-table"},[n("tbody",e._l(e.plans,function(t){return n("tr",[n("td",[n("div",{staticClass:"table-spacer"},[n("strong",[e._v(e._s(t.name))])])]),e._v(" "),n("td",{staticClass:"text-center"},[n("div",{staticClass:"table-spacer"},[n("ul",{staticClass:"features"},e._l(t.features,function(t){return n("li",[e._v(e._s(t))])}))])]),e._v(" "),n("td",{staticClass:"text-center"},[n("div",{staticClass:"table-spacer"},[e._v("\n\t\t\t\t\t\t$"+e._s(t.price)+" "+e._s(t.interval)+"\n\t\t\t\t\t\t"),e.coupon?n("span",[e._v("*")]):e._e()])]),e._v(" "),n("td",{staticClass:"text-right"},[e.showCancelButton(t.id)?n("a",{staticClass:"btn btn-danger",attrs:{href:e.routes.cancel_subscription},on:{click:e.confirmCancel}},[e._v("Cancel Subscription")]):e._e(),e._v(" "),e.showChangeButton(t.id)?n("a",{staticClass:"btn",class:[e.isCurrentPlan(t.id)?"btn-default":"btn-primary"],attrs:{href:e.routes.change_plan+"?plan_id="+t.id,disabled:e.isCurrentPlan(t.id)},on:{click:e.confirmChange}},[e._v(e._s(e.changeButtonText(t.id)))]):e._e(),e._v(" "),e.showUpgradeButton(t.id)?n("div",[e.isCurrentPlan(t.id)?n("button",{staticClass:"btn btn-default",attrs:{type:"button",disabled:""}},[e._v("Current Plan")]):n("stripe-upgrade",{attrs:{"form-data":e.stripeForm,action:e.routes.form_post_subscribe,text:"Upgrade",plan:t,coupon:e.coupon}})],1):e._e()])])}))]):e._e(),e._v(" "),e.coupon?n("div",{staticClass:"alert alert-info coupon-alert"},[e._v("\n\t\t\t* price before coupon is applied\n\t\t")]):e._e()])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"panel panel-default payment-history-panel"},[n("div",{staticClass:"panel-heading"},[e._v("Payment History")]),e._v(" "),n("div",{staticClass:"panel-body"},[e.invoices.length?n("table",{staticClass:"table payment-history-table"},[e._m(0),e._v(" "),n("tbody",e._l(e.invoices,function(t){return n("tr",[n("td",[n("div",{staticClass:"table-spacer"},[e._v(e._s(t.date))])]),e._v(" "),n("td",{staticClass:"text-right"},[n("div",{staticClass:"table-spacer"},[e._v(e._s(t.total))])]),e._v(" "),n("td",{staticClass:"text-right"},[t.link?n("a",{staticClass:"btn btn-default btn-sm",attrs:{href:t.link}},[e._v("Download")]):e._e()])])}))]):n("em",[e._v("No invoices yet")])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th",[e._v("Date")]),e._v(" "),n("th",{staticClass:"text-right"},[e._v("Total")]),e._v(" "),n("th")])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{attrs:{action:e.action,method:"post"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.csrfToken,expression:"formData.csrfToken"}],attrs:{type:"hidden",name:"_token"},domProps:{value:e.formData.csrfToken},on:{input:function(t){t.target.composing||(e.formData.csrfToken=t.target.value)}}}),e._v(" "),e.plan?n("input",{directives:[{name:"model",rawName:"v-model",value:e.plan.id,expression:"plan.id"}],attrs:{type:"hidden",name:"plan_id"},domProps:{value:e.plan.id},on:{input:function(t){t.target.composing||(e.plan.id=t.target.value)}}}):e._e(),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.stripeToken,expression:"stripeToken"}],attrs:{type:"hidden",name:"stripeToken"},domProps:{value:e.stripeToken},on:{input:function(t){t.target.composing||(e.stripeToken=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.billing_name,expression:"billing_name"}],attrs:{type:"hidden",name:"billing_name"},domProps:{value:e.billing_name},on:{input:function(t){t.target.composing||(e.billing_name=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.billing_address_country,expression:"billing_address_country"}],attrs:{type:"hidden",name:"billing_address_country"},domProps:{value:e.billing_address_country},on:{input:function(t){t.target.composing||(e.billing_address_country=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.billing_address_zip,expression:"billing_address_zip"}],attrs:{type:"hidden",name:"billing_address_zip"},domProps:{value:e.billing_address_zip},on:{input:function(t){t.target.composing||(e.billing_address_zip=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.billing_address_state,expression:"billing_address_state"}],attrs:{type:"hidden",name:"billing_address_state"},domProps:{value:e.billing_address_state},on:{input:function(t){t.target.composing||(e.billing_address_state=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.billing_address_line1,expression:"billing_address_line1"}],attrs:{type:"hidden",name:"billing_address_line1"},domProps:{value:e.billing_address_line1},on:{input:function(t){t.target.composing||(e.billing_address_line1=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.billing_address_city,expression:"billing_address_city"}],attrs:{type:"hidden",name:"billing_address_city"},domProps:{value:e.billing_address_city},on:{input:function(t){t.target.composing||(e.billing_address_city=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.billing_address_country_code,expression:"billing_address_country_code"}],attrs:{type:"hidden",name:"billing_address_country_code"},domProps:{value:e.billing_address_country_code},on:{input:function(t){t.target.composing||(e.billing_address_country_code=t.target.value)}}}),e._v(" "),e.coupon?n("input",{directives:[{name:"model",rawName:"v-model",value:e.coupon,expression:"coupon"}],attrs:{type:"hidden",name:"coupon"},domProps:{value:e.coupon},on:{input:function(t){t.target.composing||(e.coupon=t.target.value)}}}):e._e(),e._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.open}},[e._v(e._s(e.text))])])},staticRenderFns:[]}},function(e,t,n){var i=n(12);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(2)("4297f7bb",i,!0)},function(e,t,n){var i=n(13);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(2)("116cde53",i,!0)},function(e,t,n){var i=n(14);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(2)("21330814",i,!0)},function(e,t){e.exports=function(e,t){for(var n=[],i={},r=0;r<t.length;r++){var s=t[r],a=s[0],o=s[1],l=s[2],u=s[3],d={id:e+":"+r,css:o,media:l,sourceMap:u};i[a]?i[a].parts.push(d):n.push(i[a]={id:a,parts:[d]})}return n}},function(t,n){t.exports=e},function(e,n){e.exports=t}])});
//# sourceMappingURL=StripeVueComponents.js.map